<div class="card">
  <h2>新增病患</h2>
  <div class="form-row">
    <input id="pName" placeholder="病患姓名" />
    <input id="pBed" placeholder="床號" />
    <button id="btnSave" class="btn">儲存</button>
  </div>
</div>

<script>
  window.addEventListener('app:navigate', function (e) {
    if (e.detail.page !== 'add_patient') return;
    document.getElementById('btnSave').onclick = () => {
      const name = document.getElementById('pName').value.trim();
      const bed = document.getElementById('pBed').value.trim();
      if (!name) return alert('請輸入姓名');
      const state = window.App.getState();
      const id = (state.patients.slice(-1)[0]?.id || 0) + 1;
      state.patients.push({ id, name, bed });
      window.App.navigate('patients');
    };
  });
</script>
